# 第一章 第一个示例

1. 重构的第一个步骤永远相同：确保即将修改的代码有一组可靠的测试
2. 提炼函数：106
   （1）将代码抽离成一个函数，应该遵循最大程度减少犯错的可能：对于面向功能点的代码提炼出来封装成函数,能够通过函数名一下就看出功能
   （2）看哪些变量会离开原来的作用域，不会变化的变量可以当作参数传入，会修改的变量可以在函数中直接返回
3. 每做一次修改就要运行一遍测试用例，保证修改点最小，出现错误也不叫容易回退
4. 每做完一个改动本地提交一次，当改造完成再将所有提交修改压缩成更有意义的提交
5. 下一件事情就是为抽离出来的函数的变量改名，使他们更简洁
6. 对于会创建局部作用域的临时变量要想办法移出
   （1） 以查询取代临时变量：178
   （2）把变量抽离成单独的函数
   （3）使用内联变量代替参数：123
   （4）改变函数声明：124 的方式移除 play 变量，先到函数内部使用新提炼的函数；然后删除参数
7. 移除局部变量的好处在于做提炼时会简单很多，因为需要操心的局部变量变少了
8. 临时变量往往会带来麻烦，只在对其进行处理的代码块内有用，实质上时鼓励你写长而复杂的函数，比如函数赋值给临时变量
9. 一些重构的手法也会显著的影响性能，但是也更便于调优，如果重构引入了性能损耗，先完成重构再做性能优化
10. 尽量把计算相关的逻辑抽离，主函数只保留主业务相关逻辑
